name = "cross-session-sync"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[env.production]
vars = { ENVIRONMENT = "production" }

[[kv_namespaces]]
binding = "SESSIONS"
id = "cross_session_sync_sessions"

[[kv_namespaces]]
binding = "TASKS"
id = "cross_session_sync_tasks"

[[kv_namespaces]]
binding = "LOCKS"
id = "cross_session_sync_locks"

[[d1_databases]]
binding = "DB"
database_name = "cross-session-sync"
database_id = "cross_session_sync_db"

[[durable_objects.bindings]]
name = "SESSION_COORDINATOR"
class_name = "SessionCoordinator"

[[migrations]]
tag = "v1"
new_classes = ["SessionCoordinator"]

[triggers]
crons = ["*/5 * * * *"]